<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>JEDI 3.0</title>

        <!--Custom CSS-->
        <link rel="stylesheet" type="text/css" href="css/style.css" />

        <!--Calcite CDN CSS-->
        <script type="module" src="https://js.arcgis.com/calcite-components/1.0.7/calcite.esm.js"></script>
        <link rel="stylesheet" type="text/css" href="https://js.arcgis.com/calcite-components/1.0.7/calcite.css" />
        <link disabled="true" id="arcgis-maps-sdk-theme-dark" rel="stylesheet" href="https://js.arcgis.com/4.26/esri/themes/dark/main.css" />
        <link disabled="false" id="arcgis-maps-sdk-theme-light" rel="stylesheet" href="https://js.arcgis.com/4.26/esri/themes/light/main.css" />
        <link rel="stylesheet" href="https://js.arcgis.com/4.26/esri/themes/light/main.css" />

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"></script>

        <!--[if IE<9]
            <link rel="stylesheet" href="css.style.css">
        <![endIf]-->
    </head>

    <body>
        <calcite-shell>
            <div id="header-title" slot="header">
                <h2>JEDI - JCAT Events Dashboard Instrument v3.0 UAT</h2>
                <calcite-dropdown id="menu">
                    <calcite-button slot="trigger" icon-start="hamburger" appearance="transparent" kind="neutral" scale="l"></calcite-button>
                    <calcite-dropdown-group>
                        <calcite-dropdown-item icon-start="web" href="https://faasysops.maps.arcgis.com/apps/dashboards/ef6744ae83874e979bb2c6e3dd8d8c07" target="_blank">IWL Dashboard</calcite-dropdown-item>
                        <calcite-dropdown-item icon-start="attachment" href="https://faasysops.maps.arcgis.com/apps/dashboards/ef6744ae83874e979bb2c6e3dd8d8c07" target="_blank">Attachment A</calcite-dropdown-item>
                        <calcite-dropdown-item icon-start="attachment" href="https://faasysops.maps.arcgis.com/apps/dashboards/ef6744ae83874e979bb2c6e3dd8d8c07" target="_blank">Attachment C</calcite-dropdown-item>
                        <calcite-dropdown-item icon-start="information" href="https://faasysops.maps.arcgis.com/apps/dashboards/ef6744ae83874e979bb2c6e3dd8d8c07" target="_blank">User Guide</calcite-dropdown-item>
                        <calcite-dropdown-item icon-start="app-launcher" href="https://faasysops.maps.arcgis.com/apps/dashboards/ef6744ae83874e979bb2c6e3dd8d8c07" target="_blank">ADIT</calcite-dropdown-item>
                    </calcite-dropdown-group>
                </calcite-dropdown>
            </div>

            <calcite-action-bar expanded id="incident-bar" scale="m">
                <calcite-label class="new-incident"></calcite-label>
                <calcite-button icon-start="plus-circle" appearance="transparent" kind="inverse" scale="l" class="new-incident" id="new-incident-btn"></calcite-button>
                <calcite-label class="new-incident" id="list-label"><h4 style="color:white;">Incident List</h4></calcite-label>
                <calcite-filter placeholder="Filter Incidents" id="incident-filter"></calcite-filter>
                <div id="list-container" style="height: 75%; overflow-y: auto;">
                    <calcite-list style="width:173.3px" id="incident-list">
                        <!--List generated by JCAT Feature Layer in JS-->
                    </calcite-list>   
                </div>
                <calcite-action slot="bottom-actions" icon="layers" text="Refresh IWLs" appearance="transparent" kind="inverse" scale="l" id="refresh-iwl"></calcite-action>
                <calcite-label slot="bottom-actions" id="refresh-container">
                    <p id="refresh-text">
                        <!--Refresh Time generated by layer query in JS-->
                    </p>
                </calcite-label>
            </calcite-action-bar>

            <calcite-panel id="survey-panel" class="survey">
                <div id="survey-header">JCAT Incident Details</div>
                <div id="mode-container">
                    <p style="color: white;">Select the appropriate mode option to utilize only the necessary modules for the incident:</p>
                    <calcite-combobox selection-mode="single" id="input-mode">
                        <calcite-combobox-item value="Standard" text-label="Standard" selected></calcite-combobox-item>
                        <calcite-combobox-item value="Lite1" text-label="Lite Mode 1"></calcite-combobox-item>
                        <calcite-combobox-item value="Lite2" text-label="Lite Mode 2"></calcite-combobox-item>
                    </calcite-combobox>
                </div>
                <calcite-button icon-start="chevron-up" id="mode-expander"></calcite-button>
                <div id="incident-details-container" class="module-container">
                    <div class="form-container">
                        <h2 style="padding-left: 25px;">
                            New Incident
                        </h2>
                        <form>
                            <table>
                                <tr>
                                    <td>
                                        <calcite-label>
                                            Incident ID
                                            <calcite-input placeholder="ATO-SI-2023-XX" id="incident-id"></calcite-input>
                                        </calcite-label>
                                    </td>
                                    <td>
                                        <calcite-label>
                                            Incident Name
                                            <calcite-input placeholder="Example: Hurricane Hughes" id="incident-name"></calcite-input>
                                        </calcite-label>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <calcite-label>
                                            Incident Type
                                            <calcite-combobox placeholder="Select weather type" selection-mode="single" id="incident-type" allow-custom-values>
                                                <calcite-combobox-item value="Tropical Cyclone" text-label="Tropical Cyclone"></calcite-combobox-item>
                                                <calcite-combobox-item value="Winter Storm" text-label="Winter Storm"></calcite-combobox-item>
                                                <calcite-combobox-item value="Flood" text-label="Flood"></calcite-combobox-item>
                                                <calcite-combobox-item value="Tornado" text-label="Tornado"></calcite-combobox-item>
                                                <calcite-combobox-item value="Wildfire" text-label="Wildfire"></calcite-combobox-item>
                                                <calcite-combobox-item value="Earthquake" text-label="Earthquake"></calcite-combobox-item>
                                                <calcite-combobox-item value="Tsunami" text-label="Tsunami"></calcite-combobox-item>
                                                <calcite-combobox-item value="Bio/Chemical" text-label="Bio/Chemical"></calcite-combobox-item>
                                                <calcite-combobox-item value="Volcano" text-label="Volcano"></calcite-combobox-item>
                                                <calcite-combobox-item value="Space Weather" text-label="Space Weather"></calcite-combobox-item>
                                                <calcite-combobox-item value="Other" text-label="Other"></calcite-combobox-item>
                                            </calcite-combobox>
                                        </calcite-label></td>
                                    <td>
                                        <calcite-label>
                                            IWL Name(s)
                                            <calcite-combobox selection-mode="single" id="iwl-names">
                                                <calcite-combobox-item value="Sample" text-label="Sample"></calcite-combobox-item>
                                            </calcite-combobox>
                                        </calcite-label>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <calcite-label>
                                            Report ID
                                            <calcite-input placeholder="ATO SITREP X" id="report-id"></calcite-input>
                                        </calcite-label>
                                    </td>
                                    <td>
                                        <calcite-label>
                                            Incident Locations
                                            <calcite-input placeholder="Example: GOMEX; LA; TX" id="incident-locations"></calcite-input>
                                        </calcite-label>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <calcite-label>
                                            Incident Start DateTime
                                            <calcite-input type="datetime-local"></calcite-input>
                                        </calcite-label>
                                    </td>
                                    <td>
                                        <calcite-label>
                                            Report DateTime
                                            <calcite-input type="datetime-local"></calcite-input>
                                        </calcite-label>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <calcite-label>
                                            Threat Name
                                            <calcite-input placeholder="Example: Hurricane Hughes" id="threat-name"></calcite-input>
                                        </calcite-label>
                                    </td>
                                    <td>
                                        <calcite-label>
                                            Status of Incident
                                            <calcite-combobox selection-mode="single" id="incident-status">
                                                <calcite-combobox-item value="Open" text-label="Open"></calcite-combobox-item>
                                                <calcite-combobox-item value="Sustained" text-label="Sustained"></calcite-combobox-item>
                                                <calcite-combobox-item value="Close" text-label="Close"></calcite-combobox-item>
                                                <calcite-combobox-item value="Archive" text-label="Archive"></calcite-combobox-item>
                                            </calcite-combobox>
                                        </calcite-label>
                                    </td>
                                </tr>
                            </table>
                        </form>
                    </div>
                </div>
                <div id="module1-container" class="module-container" style="display:none;">
                    <div class="form-container">
                        <table style="margin-left:auto; margin-right:auto; padding:10px; table-layout:fixed;">
                            <tr>
                                <th style="text-align:left; width: 40%;">Incident Name</th>
                                <th style="text-align:left; width: 30%;">Incident ID</th>
                                <th style="text-align:left; width: 30%;">Report ID</th>
                            </tr>
                            <tr>
                                <td style="text-align:left; padding:0;" id="kt-incident-name"></td>
                                <td style="text-align:left; padding:0;" id="kt-incident-id"></td>
                                <td style="text-align:left; padding:0;" id="kt-report-id"></td>
                            </tr>
                        </table>
                        <p style="padding-left:10px;padding-right:10px">
                            Example: Hurrican Kopp remains a powerful storm impacting the NAS within the IWA. The storm has impacted the operation
                            of 9 ATM facilities (7 ATC ZERO and 2 ATC LIMITED), 72 ANS systems, and 9 airports.
                        </p>
                        <calcite-button id="key-takeaways-btn" appearance="transparent" kind="neutral" icon-start="plus-square" style="padding-left: 10px;">Add a New Item</calcite-button>
                        <div id="key-takeaways">
                            <div draggable="true">
                                <calcite-text-area max-length="250"></calcite-text-area>
                            </div>
                            <div draggable="true">
                                <calcite-text-area max-length="250"></calcite-text-area>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="module2-container" class="module-container" style="display:none;">
                    <div class="form-container">
                        <h2 style="padding-left: 25px;">
                            2. Threats & Hazards Overview
                        </h2>
                    </div>
                </div>
                <div id="module3-container" class="module-container" style="display:none;">
                    <div class="form-container">
                        <h2 style="padding-left: 25px;">
                            3. IWA/IWL Stats
                        </h2>
                    </div>
                </div>
                <div id="module4-container" class="module-container" style="display:none;">
                    <div class="form-container">
                        <h2 style="padding-left: 25px;">
                            4. TFM Impacts and Outlook
                        </h2>
                    </div>
                </div>
                <div id="module5-container" class="module-container" style="display:none;">
                    <div class="form-container">
                        <h2 style="padding-left: 25px;">
                            5. Operational Response Measures
                        </h2>
                    </div>
                </div>
                <div id="module6-container" class="module-container" style="display:none;">
                    <div class="form-container">
                        <h2 style="padding-left: 25px;">
                            6. Reponse and Recovery Focus
                        </h2>
                    </div>
                </div>
                <div id="module7-container" class="module-container" style="display:none;">
                    <div class="form-container">
                        <h2 style="padding-left: 25px;">
                            7. Key Response Nodes
                        </h2>
                    </div>
                </div>
                <div id="module8-container" class="module-container" style="display:none;">
                    <div class="form-container">
                        <h2 style="padding-left: 25px;">
                            8. Approval
                        </h2>
                    </div>
                </div>
                <div id="tab-container">
                    <calcite-segmented-control id="module-tabs">
                        <calcite-segmented-control-item value="incident-details" checked>Incident Details</calcite-segmented-control-item>
                        <calcite-segmented-control-item value="1">1. Key Takeaways</calcite-segmented-control-item>
                        <calcite-segmented-control-item value="2">2. Threats & Hazards</calcite-segmented-control-item>
                        <calcite-segmented-control-item value="3">3. IWA/IWL Stats</calcite-segmented-control-item>
                        <calcite-segmented-control-item value="4">4. TFM Impacts/Outlook</calcite-segmented-control-item>
                        <calcite-segmented-control-item value="5">5. Operational Response</calcite-segmented-control-item>
                        <calcite-segmented-control-item value="6">6. Response & Recovery</calcite-segmented-control-item>
                        <calcite-segmented-control-item value="7">7. Key Response Nodes</calcite-segmented-control-item>
                        <calcite-segmented-control-item value="8">8. Approval</calcite-segmented-control-item>
                    </calcite-segmented-control>                    
                </div>
            </calcite-panel>
            
            <calcite-panel id="doc-viewer" class="viewer">
                <embed id="pdf-viewer" src="sample_docs/jsPDF_2pages.pdf" type="application/pdf">
            </calcite-panel>
            <calcite-panel heading="Form Viewer Panel" id="form-viewer" class="viewer" hidden></calcite-panel>

            <calcite-action-pad expand-disabled id="viewer-pad">
                    <calcite-action-group>
                        <calcite-action text="Form View" icon="form-elements" id="form-view-btn" scale="l"></calcite-action>
                        <calcite-tooltip label="Form View" reference-element="form-view-btn">Form View</calcite-tooltip>
                        <calcite-action text="Document View" icon="file-pdf" id="doc-view-btn" scale="l" active></calcite-action>
                        <calcite-tooltip label="Document View" reference-element="doc-view-btn">Document View</calcite-tooltip>
                    </calcite-action-group>
                </calcite-action-pad>
        </calcite-shell>

        <script src="lib/jquery-3.6.4.js"></script>
        <script src="https://js.arcgis.com/4.26/"></script>
        <script src="js/layout.js"></script>
        <script type="module" src="js/jspdf.js"></script>
        <script src="js/main.js"></script>
    </body>
</html>